<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ujian IPA Kelas 4</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
body{
    background: linear-gradient(135deg,#e0f2fe,#fef9c3);
    min-height:100vh;
}

/* pilihan jawaban */
.option-label{
    transition:all .25s ease;
}
.option-input:checked + .option-label{
    background:#dbeafe;
    border-color:#2563eb;
    transform:scale(1.03);
}

/* animasi masuk */
.fade-in{
    animation:fade .6s ease;
}
@keyframes fade{
    from{opacity:0;transform:translateY(10px)}
    to{opacity:1;transform:none}
}
</style>
</head>

<body class="text-slate-800 antialiased" oncontextmenu="return false;">

<!-- üîä SOUND -->
<audio id="clickSound">
    <source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_82f6c95e8a.mp3" type="audio/mpeg">
</audio>

<!-- LOGIN -->
<div id="login-screen" class="flex items-center justify-center min-h-screen p-4">
<div class="bg-white w-full max-w-md p-8 rounded-3xl shadow-xl border text-center fade-in">

<div class="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6">
<span class="text-4xl">üìò</span>
</div>

<h2 class="text-2xl font-bold text-blue-700 mb-2">Ujian IPA Kelas 4</h2>
<p class="text-slate-500 mb-6">Tema Bunyi & Pendengaran</p>

<input id="student-name" placeholder="Nama Lengkap"
class="w-full px-4 py-3 border rounded-xl mb-4 focus:ring-2 focus:ring-blue-400">

<button onclick="startExam()"
class="w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-xl font-bold shadow-lg">
Mulai Ujian
</button>

<p class="text-xs text-slate-400 mt-4 italic">
Ujian akan otomatis layar penuh
</p>

</div>
</div>

<!-- QUIZ -->
<div id="quiz-area" class="hidden max-w-4xl mx-auto py-6 px-4">

<!-- HEADER -->
<div class="sticky top-4 z-40 bg-white/90 backdrop-blur p-4 rounded-2xl shadow mb-6 flex justify-between items-center">
<div>
<h3 id="display-name" class="font-bold text-blue-700"></h3>
<p class="text-sm text-slate-500">
Belum dijawab: <span id="unanswered-count" class="font-bold text-orange-500">20</span>
</p>
</div>

<div id="timer" class="bg-blue-700 text-white px-6 py-2 rounded-xl font-mono text-xl shadow">
30:00
</div>
</div>

<!-- PROGRESS -->
<div class="mb-6">
<div class="flex justify-between text-sm mb-1">
<span>Progress</span>
<span id="progress-text">0 / 20</span>
</div>
<div class="w-full bg-slate-200 h-3 rounded-full overflow-hidden">
<div id="progress-bar" class="h-3 bg-gradient-to-r from-blue-500 to-yellow-400 w-0 transition-all"></div>
</div>
</div>

<form id="quiz-form" class="space-y-6">
<div id="questions-list" class="space-y-6"></div>

<button type="button" onclick="finishExam()"
class="w-full bg-emerald-600 hover:bg-emerald-700 text-white py-4 rounded-xl font-bold shadow-lg">
Selesai & Kirim
</button>
</form>
</div>

<!-- HASIL -->
<div id="result-screen" class="hidden flex items-center justify-center min-h-screen p-4">
<div class="bg-white w-full max-w-xl p-10 rounded-3xl shadow-2xl text-center fade-in">

<h2 class="text-2xl font-bold text-blue-700 mb-4">Hasil Ujian</h2>

<h1 id="final-score" class="text-7xl font-black text-blue-600 mb-4">0</h1>
<p id="score-details" class="text-lg mb-8"></p>

<div class="bg-slate-100 p-6 rounded-xl">
<p class="text-sm font-semibold mb-3">Reset Admin</p>
<input id="admin-pass" type="password" placeholder="Password"
class="w-full px-4 py-2 rounded-lg mb-3 border">
<button onclick="adminReset()"
class="w-full bg-slate-800 text-white py-2 rounded-lg">
Reset
</button>
</div>

</div>
</div>

<script>
const ADMIN_PASSWORD="admin123";
let timeLeft=30*60;
let timerInterval;

const clickSound=document.getElementById("clickSound");

const questions=[
{q:"Bunyi dihasilkan oleh benda yang...",a:"Bergetar",b:"Diam",c:"Berpindah",d:"Panas",correct:"a"},
{q:"Bunyi tidak dapat merambat melalui...",a:"Padat",b:"Ruang hampa",c:"Air",d:"Udara",correct:"b"},
{q:"Indera pendengar manusia adalah...",a:"Mata",b:"Hidung",c:"Telinga",d:"Kulit",correct:"c"},
{q:"Bunyi pantul yang terdengar jelas disebut...",a:"Gaung",b:"Nada",c:"Gema",d:"Irama",correct:"c"},
{q:"Satuan bunyi adalah...",a:"Meter",b:"Desibel",c:"Gram",d:"Liter",correct:"b"},
{q:"Bunyi merambat paling cepat melalui...",a:"Udara",b:"Air",c:"Padat",d:"Kosong",correct:"c"},
{q:"Daun telinga berfungsi untuk...",a:"Menangkap bunyi",b:"Menyeimbangkan",c:"Melihat",d:"Bernafas",correct:"a"},
{q:"Alat musik ditiup contohnya...",a:"Gitar",b:"Drum",c:"Seruling",d:"Piano",correct:"c"},
{q:"Nada adalah bunyi yang...",a:"Keras",b:"Teratur",c:"Lemah",d:"Tidak jelas",correct:"b"},
{q:"Hewan pendengar ultrasonik...",a:"Ayam",b:"Kelelawar",c:"Ikan",d:"Sapi",correct:"b"},
{q:"Bagian telinga tengah adalah...",a:"Gendang",b:"Martil",c:"Daun",d:"Koklea",correct:"b"},
{q:"Gema sering terjadi di...",a:"Kelas",b:"Lembah",c:"Kamar",d:"Dapur",correct:"b"},
{q:"Peredam bunyi ada di...",a:"Pasar",b:"Studio musik",c:"Jalan",d:"Sawah",correct:"b"},
{q:"Cara merawat telinga yang benar...",a:"Benda tajam",b:"Volume keras",c:"Kapas halus",d:"Air",correct:"c"},
{q:"Bunyi berasal dari...",a:"Cahaya",b:"Getaran",c:"Air",d:"Bayangan",correct:"b"},
{q:"Gendang telinga berfungsi...",a:"Melihat",b:"Menangkap getaran",c:"Bernapas",d:"Berjalan",correct:"b"},
{q:"Nada tinggi frekuensinya...",a:"Rendah",b:"Cepat",c:"Tinggi",d:"Lambat",correct:"c"},
{q:"Bunyi tidak merambat di...",a:"Udara",b:"Air",c:"Padat",d:"Hampa",correct:"d"},
{q:"Telinga termasuk indera...",a:"Peraba",b:"Pendengar",c:"Perasa",d:"Pencium",correct:"b"},
{q:"Getaran menghasilkan...",a:"Cahaya",b:"Bunyi",c:"Bayangan",d:"Panas",correct:"b"}
];

function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}}

function startExam(){
const name=document.getElementById("student-name").value;
if(!name) return alert("Isi nama dulu!");

if(document.documentElement.requestFullscreen){
document.documentElement.requestFullscreen();
}

document.getElementById("display-name").innerText=name;
document.getElementById("login-screen").classList.add("hidden");
document.getElementById("quiz-area").classList.remove("hidden");

renderQuestions();
startTimer();
}

function renderQuestions(){
shuffle(questions);
const list=document.getElementById("questions-list");
questions.forEach((q,i)=>{
const card=document.createElement("div");
card.className="bg-white p-6 rounded-2xl border shadow fade-in";
card.innerHTML=`
<p class="font-semibold mb-4">üìù ${i+1}. ${q.q}</p>
<div class="grid md:grid-cols-2 gap-3">
${["a","b","c","d"].map(o=>`
<label class="flex cursor-pointer">
<input type="radio" name="q${i}" value="${o}" class="hidden option-input"
onchange="answerClick()">
<div class="option-label w-full p-4 border rounded-xl bg-slate-50">
<b>${o.toUpperCase()}.</b> ${q[o]}
</div>
</label>`).join("")}
</div>`;
list.appendChild(card);
});
}

function answerClick(){
clickSound.currentTime=0;
clickSound.play();
updateCounter();
}

function updateCounter(){
const answered=document.querySelectorAll("input[type=radio]:checked").length;
document.getElementById("unanswered-count").innerText=questions.length-answered;
document.getElementById("progress-text").innerText=`${answered} / ${questions.length}`;
document.getElementById("progress-bar").style.width=(answered/questions.length*100)+"%";
}

function startTimer(){
timerInterval=setInterval(()=>{
let m=Math.floor(timeLeft/60);
let s=timeLeft%60;
document.getElementById("timer").innerText=
`${m.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`;
if(timeLeft<=0){clearInterval(timerInterval);finishExam();}
timeLeft--;
},1000);
}

function finishExam(){
clearInterval(timerInterval);
let benar=0;
questions.forEach((q,i)=>{
const sel=document.querySelector(`input[name=q${i}]:checked`);
if(sel&&sel.value===q.correct) benar++;
});
const score=Math.round((benar/questions.length)*100);

document.getElementById("quiz-area").classList.add("hidden");
document.getElementById("result-screen").classList.remove("hidden");
document.getElementById("final-score").innerText=score;

if(score>=85){
confetti({particleCount:150,spread:80,origin:{y:0.6}});
}

document.getElementById("score-details").innerText=
`Kamu menjawab benar ${benar} dari ${questions.length} soal.`;
}

function adminReset(){
if(document.getElementById("admin-pass").value===ADMIN_PASSWORD){
location.reload();
}else alert("Password salah!");
}
</script>
</body>
</html>
